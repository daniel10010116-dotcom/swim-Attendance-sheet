# 游泳課點名系統 — 實際操作測試流程

依序執行下列步驟，約 15–20 分鐘可跑完一輪。建議開兩個瀏覽器分頁（或一個無痕＋一個一般），分別當「管理員/教練」與「學生」。

---

## 一、前置：清空資料（可選）

1. 開開發者工具 (F12) → **Application** (或 應用程式) → **Local Storage** → 選你的網址
2. 刪除 `attendance_store`（若有）
3. 重新整理頁面 → 會回到預設資料（1 教練、1 學生、1 門課）

---

## 二、登入與權限

| 步驟 | 操作 | 預期結果 |
|------|------|----------|
| 1 | 用錯誤帳密登入（例如 帳號 `x` 密碼 `y`） | 顯示「帳號或密碼錯誤」 |
| 2 | 帳號 `admin`、密碼 `admin` | 進入管理員首頁，頂部有「管理員」「更改帳號密碼」「管理員」「登出」 |
| 3 | 點「登出」 | 回到登入頁 |
| 4 | 帳號 `coach1`、密碼 `123` | 進入教練首頁 |
| 5 | 登出後用 帳號 `student1`、密碼 `123` | 進入學生首頁，看到「一對一游泳」、剩餘堂數、點名按鈕 |

---

## 三、管理員：新增帳號與重複檢查

| 步驟 | 操作 | 預期結果 |
|------|------|----------|
| 6 | 用 admin 登入 → 區塊一選「新增教練」 | 出現教練表單 |
| 7 | 名稱 `李教練`、帳號 `coach1`、密碼 `111` → 送出 | 顯示「此帳號已被使用，請換一個」（因 coach1 已存在） |
| 8 | 改帳號為 `coach2` → 送出 | 顯示「教練帳號已建立」 |
| 9 | 切到「新增學生」→ 名稱 `小華`、帳號 `student1`、密碼 `222` → 送出 | 「此帳號已被使用，請換一個」 |
| 10 | 改帳號為 `student2` → 送出 | 「學生帳號已建立」 |
| 11 | 再用帳號 `admin` 試著新增教練 | 「此帳號已被使用」 |

---

## 四、管理員：分配課程

| 步驟 | 操作 | 預期結果 |
|------|------|----------|
| 12 | 區塊二：學生選「小華」、教練選「李教練」、課程名稱 `團體班`、堂數 `5`、扣完薪水 `3000` → 送出 | 「已分配課程」 |
| 13 | 學生分頁用 `student2` / `222` 登入 | 學生首頁出現「李教練」「團體班」、剩餘 5 堂、點名按鈕 |

---

## 五、學生點名 ↔ 教練確認

| 步驟 | 操作 | 預期結果 |
|------|------|----------|
| 14 | 學生分頁：在「團體班」那列點「點名」 | 按鈕變「待教練確認」且不可再點 |
| 15 | 教練分頁：用 `coach2` / `111` 登入，看區塊一「待確認點名」 | 出現一筆：小華、團體班、確認按鈕（若沒出現，等約 2 秒或重整） |
| 16 | 教練點「確認」 | 該筆消失；區塊二「課餘堂數」小華團體班變 4 堂 |
| 17 | 學生分頁 | 該列恢復「點名」、剩餘 4 堂 |
| 18 | 學生再點 4 次點名，教練每次都點確認 | 團體班剩餘變 0；教練區塊三「累計薪水」出現 3000，下方明細有「小華、團體班、完成日期、3000」 |

---

## 六、教練：扣堂紀錄與第幾節課

| 步驟 | 操作 | 預期結果 |
|------|------|----------|
| 19 | 教練首頁區塊四：選開始日與結束日（涵蓋今天）→ 查詢 | Modal 列出扣堂紀錄，欄位含「學生、課程、第幾節課、日期」；團體班應為第 1～5 節 |

---

## 七、管理員：發薪與教練刪除後資料

| 步驟 | 操作 | 預期結果 |
|------|------|----------|
| 20 | admin 登入 → 區塊四教練列表 | 李教練累計 NT$ 3000，「確認發薪」「帳號設定」 |
| 21 | 點李教練「確認發薪」 | 進入發薪頁：已結業課程表有「小華、團體班、3000」、總計 3000 |
| 22 | 點「確認發薪」 | 回到教練列表；李教練累計變 0 或該列仍在但金額 0 |
| 23 | 教練 `coach2` 登入 | 區塊三累計薪水 0，下方明細為空（已發薪清除） |
| 24 | admin → 區塊四點王教練「帳號設定」 | 進入設定頁：可改帳號/密碼、刪除教練 |
| 25 | 改帳號為 `wang`、新密碼 `abc` → 儲存 | 顯示更新成功或回到列表 |
| 26 | 登出 admin，用 帳號 `wang` 密碼 `abc` 登入 | 可登入教練（王教練） |
| 27 | admin 登入 → 區塊四對「王教練」點「帳號設定」→ 點「刪除教練」→ 確認刪除 | 回到教練列表，王教練消失 |
| 28 | 學生分頁用 student1 登入 | 「我的課程」只看到「李教練」的團體班（或小明的課），**不會**再看到「王教練」的一對一游泳（已刪教練的課應消失） |

---

## 八、管理員：學生刪除與教練視角

| 步驟 | 操作 | 預期結果 |
|------|------|----------|
| 29 | admin → 區塊三學生管理 | 列出小明、小華等 |
| 30 | 點小華的「刪除帳號」→ 確認刪除 | 小華從列表消失 |
| 31 | 教練 coach2 登入 | 區塊二「我的學生與課餘堂數」**不會**再出現小華（已刪學生的列應消失） |
| 32 | 學生分頁用 student2 / 222 登入 | 應被導回登入頁或顯示錯誤（帳號已刪）；若仍在學生頁則手動登出再登入，應無法用 222 登入 |

---

## 九、管理員：更改自己的帳號密碼

| 步驟 | 操作 | 預期結果 |
|------|------|----------|
| 33 | admin 登入 → 頂部點「更改帳號密碼」 | 彈出 Modal：帳號、新密碼、確認密碼 |
| 34 | 帳號改 `manager`、新密碼 `999`、確認密碼 `999` → 儲存 | 顯示「已更新，下次登入請使用新帳密」、Modal 關閉 |
| 35 | 登出後用 帳號 `admin` 密碼 `admin` 登入 | 應失敗（已改過） |
| 36 | 用 帳號 `manager` 密碼 `999` 登入 | 成功進入管理員首頁 |

---

## 十、快速檢查表（打勾用）

- [ ] 登入錯誤顯示「帳號或密碼錯誤」
- [ ] 學生只看到「教練仍存在」的課程（刪教練後該課消失）
- [ ] 教練只看到「學生仍存在」的列（刪學生後該列消失）
- [ ] 新增教練/學生時，重複帳號顯示「此帳號已被使用」
- [ ] 學生點名 → 教練待確認 → 確認後扣堂、堂數與薪水正確
- [ ] 教練區塊三有累計薪水與明細；發薪後明細清空
- [ ] 扣堂紀錄查詢有「第幾節課」
- [ ] 刪除教練後，該教練的累計明細不再殘留（發薪/列表正常）
- [ ] 管理員可改自己帳密並用新帳密登入

---

**建議**：第一次可從「二、登入」照表跑到底；之後若只驗某功能，可從對應段落開始（必要時先清 Local Storage 或沿用現有資料）。
